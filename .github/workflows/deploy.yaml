name: Compose and deploy
on:
    push:
        branches: [main]

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
           - name: Deploy nextJS app
             uses: appleboy/ssh-action@v1.0.0
             with:
                host: ${{secrets.SSH_HOST}}
                key: ${{secrets.SSH_KEY}}
                username: ${{secrets.SSH_USERNAME}}

                script: |
                    cd forkthis/forkthis2023-frontend/
                    git pull
                    docker-compose up --build -d